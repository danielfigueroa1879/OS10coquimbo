<<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Requisitos de Seguridad Privada - OS10 Coquimbo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #2d5016 0%, #4a7c22 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            text-align: center;
        }

        .header h1 {
            color: #2d5016;
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .header h2 {
            color: #4a7c22;
            font-size: 1.3em;
            margin-bottom: 20px;
        }

        .main-content {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            min-height: 70vh;
        }

        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .menu-card {
            background: linear-gradient(135deg, #2d5016 0%, #4a7c22 100%);
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            color: white;
            border: none;
            font-size: 16px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .menu-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.25);
        }

        .menu-card h3 {
            font-size: 1.4em;
            margin-bottom: 15px;
        }

        .menu-card p {
            font-size: 0.95em;
            opacity: 0.9;
            line-height: 1.4;
        }

        .form-section {
            display: none;
        }

        .form-section.active {
            display: block;
        }

        .form-header {
            background: linear-gradient(135deg, #2d5016 0%, #4a7c22 100%);
            color: white;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
            text-align: center;
            position: relative;
        }

        .form-header::before {
            content: '';
            background: url('logo.png') no-repeat center;
            background-size: contain;
            width: 60px;
            height: 60px;
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
        }

        .form-header h2 {
            font-size: 1.8em;
            margin-bottom: 10px;
        }

        .inspector-info {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
            border-left: 5px solid #2d5016;
        }

        .inspector-info h3 {
            color: #2d5016;
            margin-bottom: 15px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #555;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #2d5016;
        }

        .requisito-item {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            border: 1px solid #dee2e6;
            transition: all 0.3s ease;
            display: grid;
            grid-template-columns: 60px 1fr 200px 300px;
            gap: 15px;
            align-items: center;
        }

        .requisito-item.cumple {
            border-color: #28a745;
            background: #f8fff9;
        }

        .requisito-item.no-cumple {
            border-color: #dc3545;
            background: #fff8f8;
        }

        .requisito-numero {
            background: #2d5016;
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            font-weight: bold;
            text-align: center;
            font-size: 16px;
        }

        .requisito-titulo {
            font-weight: 500;
            color: #333;
            line-height: 1.4;
            font-size: 14px;
        }

        .estado-buttons {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .observacion-input {
            width: 100%;
            padding: 8px;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            resize: vertical;
            min-height: 60px;
            font-size: 13px;
        }

        .observacion-input:focus {
            outline: none;
            border-color: #2d5016;
        }

        .btn-estado {
            padding: 6px 12px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            font-size: 12px;
            width: 100%;
        }

        .btn-cumple {
            background: #28a745;
            color: white;
        }

        .btn-cumple:hover {
            background: #218838;
        }

        .btn-no-cumple {
            background: #dc3545;
            color: white;
        }

        .btn-no-cumple:hover {
            background: #c82333;
        }

        .btn-estado.active {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            transform: scale(1.05);
        }



        .action-buttons {
            text-align: center;
            margin-top: 40px;
            padding-top: 30px;
            border-top: 2px solid #e1e5e9;
        }

        .btn {
            padding: 15px 30px;
            margin: 0 10px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: #2d5016;
            color: white;
        }

        .btn-primary:hover {
            background: #1f3a0f;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #218838;
            transform: translateY(-2px);
        }

        .directiva-selector {
            background: #e9ecef;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .directiva-selector h3 {
            color: #495057;
            margin-bottom: 15px;
            text-align: center;
        }

        .directiva-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .directiva-option {
            background: white;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .directiva-option:hover {
            border-color: #2d5016;
            background: #f8fff9;
        }

        .directiva-option.active {
            border-color: #2d5016;
            background: #2d5016;
            color: white;
        }

        .print-info {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: center;
            color: #0c5460;
        }

        @media print {
            body {
                background: white;
                color: black;
            }
            
            .main-content {
                background: white;
                box-shadow: none;
                padding: 20px;
            }
            
            .action-buttons {
                display: none;
            }
            
            .btn-estado {
                display: none;
            }
            
            .observacion-area textarea {
                border: 1px solid #ccc;
                background: white;
            }
        }

        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .requisito-item {
                grid-template-columns: 1fr;
                gap: 10px;
                text-align: center;
            }
            
            .estado-buttons {
                flex-direction: row;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div style="display: flex; align-items: center; justify-content: center; margin-bottom: 20px;">
                <img src="logo.png" alt="Logo Carabineros" style="height: 80px; margin-right: 20px;">
                <div>
                    <h1>Sistema de Requisitos de Seguridad Privada</h1>
                    <h2>OS10 Coquimbo - Carabineros de Chile</h2>
                </div>
            </div>
            <p>Sistema de verificación y control de cumplimiento normativo</p>
        </div>

        <div class="main-content">
            <!-- Página de inicio -->
            <div id="inicio-section" class="form-section active">
                <h2 style="text-align: center; color: #2d5016; margin-bottom: 30px; font-size: 2em;">
                    Seleccione el tipo de requisitos a revisar
                </h2>
                
                <div class="menu-grid">
                    <button class="menu-card" onclick="mostrarSeccion('plan-seguridad')">
                        <h3>📋 Plan de Seguridad</h3>
                        <p>Verificación de requisitos para planes de seguridad con vigencia de 2 años según Decreto Exento N° 32</p>
                    </button>
                    
                    <button class="menu-card" onclick="mostrarSeccion('servicentros')">
                        <h3>⛽ Medidas Servicentros</h3>
                        <p>Requisitos de seguridad para establecimientos de venta de combustible al público (3 años de vigencia)</p>
                    </button>
                    
                    <button class="menu-card" onclick="mostrarSeccion('sobre-500uf')">
                        <h3>💰 Medidas Sobre 500 UF</h3>
                        <p>Medidas de seguridad para establecimientos que manejan valores superiores a 500 UF (3 años)</p>
                    </button>
                    
                    <button class="menu-card" onclick="mostrarSeccion('directiva-funcionamiento')">
                        <h3>📄 Directiva de Funcionamiento</h3>
                        <p>Requisitos para directivas de instalaciones, eventos deportivos y otros eventos masivos</p>
                    </button>
                </div>
            </div>

            <!-- Sección Plan de Seguridad -->
            <div id="plan-seguridad-section" class="form-section">
                <div class="form-header">
                    <h2>📋 Requisitos Plan de Seguridad</h2>
                    <p>Vigencia según estudio (2 años) - Decreto Exento N° 32 del 31.01.2024</p>
                </div>

                <div class="inspector-info">
                    <h3>Información del Inspector</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="inspector-plan">Funcionario Inspector:</label>
                            <input type="text" id="inspector-plan" placeholder="Nombre completo del funcionario">
                        </div>
                        <div class="form-group">
                            <label for="fecha-plan">Fecha y Hora de Inspección:</label>
                            <input type="datetime-local" id="fecha-plan">
                        </div>
                    </div>
                </div>

                <div class="print-info">
                    <strong>Nota:</strong> Complete todos los campos antes de imprimir. La información del inspector quedará registrada en el documento.
                </div>

                <div id="requisitos-plan-seguridad">
                    <!-- Los requisitos se generarán dinámicamente -->
                </div>

                <div class="action-buttons">
                    <button class="btn btn-secondary" onclick="mostrarSeccion('inicio')">🏠 Volver al Inicio</button>
                    <button class="btn btn-success" onclick="imprimirFormulario('plan-seguridad')">🖨️ Imprimir Formulario</button>
                </div>
            </div>

            <!-- Sección Servicentros -->
            <div id="servicentros-section" class="form-section">
                <div class="form-header">
                    <h2>⛽ Requisitos Medidas de Seguridad Servicentros</h2>
                    <p>Vigencia 3 años - Decreto Exento N° 32 del 31.01.2024</p>
                </div>

                <div class="inspector-info">
                    <h3>Información del Inspector</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="inspector-servicentros">Funcionario Inspector:</label>
                            <input type="text" id="inspector-servicentros" placeholder="Nombre completo del funcionario">
                        </div>
                        <div class="form-group">
                            <label for="fecha-servicentros">Fecha y Hora de Inspección:</label>
                            <input type="datetime-local" id="fecha-servicentros">
                        </div>
                    </div>
                </div>

                <div class="print-info">
                    <strong>Nota:</strong> Complete todos los campos antes de imprimir. La información del inspector quedará registrada en el documento.
                </div>

                <div id="requisitos-servicentros">
                    <!-- Los requisitos se generarán dinámicamente -->
                </div>

                <div class="action-buttons">
                    <button class="btn btn-secondary" onclick="mostrarSeccion('inicio')">🏠 Volver al Inicio</button>
                    <button class="btn btn-success" onclick="imprimirFormulario('servicentros')">🖨️ Imprimir Formulario</button>
                </div>
            </div>

            <!-- Sección Sobre 500 UF -->
            <div id="sobre-500uf-section" class="form-section">
                <div class="form-header">
                    <h2>💰 Requisitos Medidas de Seguridad Sobre 500 UF</h2>
                    <p>Vigencia 3 años - Decreto Exento N° 32 del 31.01.2024</p>
                </div>

                <div class="inspector-info">
                    <h3>Información del Inspector</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="inspector-500uf">Funcionario Inspector:</label>
                            <input type="text" id="inspector-500uf" placeholder="Nombre completo del funcionario">
                        </div>
                        <div class="form-group">
                            <label for="fecha-500uf">Fecha y Hora de Inspección:</label>
                            <input type="datetime-local" id="fecha-500uf">
                        </div>
                    </div>
                </div>

                <div class="print-info">
                    <strong>Nota:</strong> Complete todos los campos antes de imprimir. La información del inspector quedará registrada en el documento.
                </div>

                <div id="requisitos-500uf">
                    <!-- Los requisitos se generarán dinámicamente -->
                </div>

                <div class="action-buttons">
                    <button class="btn btn-secondary" onclick="mostrarSeccion('inicio')">🏠 Volver al Inicio</button>
                    <button class="btn btn-success" onclick="imprimirFormulario('sobre-500uf')">🖨️ Imprimir Formulario</button>
                </div>
            </div>

            <!-- Sección Directiva de Funcionamiento -->
            <div id="directiva-funcionamiento-section" class="form-section">
                <div class="form-header">
                    <h2>📄 Requisitos Directiva de Funcionamiento</h2>
                    <p>Verificación según tipo de directiva</p>
                </div>

                <div class="inspector-info">
                    <h3>Información del Inspector</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="inspector-directiva">Funcionario Inspector:</label>
                            <input type="text" id="inspector-directiva" placeholder="Nombre completo del funcionario">
                        </div>
                        <div class="form-group">
                            <label for="fecha-directiva">Fecha y Hora de Inspección:</label>
                            <input type="datetime-local" id="fecha-directiva">
                        </div>
                    </div>
                </div>

                <div class="directiva-selector">
                    <h3>Seleccione el tipo de directiva a revisar:</h3>
                    <div class="directiva-options">
                        <div class="directiva-option" onclick="seleccionarDirectiva('instalaciones')">
                            <h4>🏢 Directivas de Instalaciones</h4>
                            <p>Requisitos para instalaciones fijas</p>
                        </div>
                        <div class="directiva-option" onclick="seleccionarDirectiva('futbol')">
                            <h4>⚽ Partidos de Fútbol</h4>
                            <p>Requisitos para eventos deportivos</p>
                        </div>
                        <div class="directiva-option" onclick="seleccionarDirectiva('eventos')">
                            <h4>🎭 Eventos Masivos</h4>
                            <p>Requisitos para eventos en general</p>
                        </div>
                    </div>
                </div>

                <div class="print-info">
                    <strong>Nota:</strong> Complete todos los campos antes de imprimir. La información del inspector quedará registrada en el documento.
                </div>

                <div id="requisitos-directiva">
                    <!-- Los requisitos se generarán dinámicamente según la selección -->
                </div>

                <div class="action-buttons">
                    <button class="btn btn-secondary" onclick="mostrarSeccion('inicio')">🏠 Volver al Inicio</button>
                    <button class="btn btn-success" onclick="imprimirFormulario('directiva-funcionamiento')">🖨️ Imprimir Formulario</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Datos de los requisitos
        const requisitos = {
            planSeguridad: [
                "SOLICITUD SIMPLE DE LA ENTIDAD OBLIGADA.",
                "EL PLAN DE SEGURIDAD, CUMPLE CON EL ORDEN ESTABLECIDO DEL MANUAL DE ORGANIZACIÓN.",
                "ENCARGADO DE SEGURIDAD: EL ENCARGADO DE SEGURIDAD DEBE ESTAR ACREDITADO (AUTORIZACIÓN RESOLUCIÓN) ASÍ COMO TAMBIÉN EL SUPLENTE.",
                "CAJERO AUTOMÁTICO: CUANTOS CAJEROS SE MANTIENEN EN EL BANCO Y NÚMEROS ATM.",
                "EMPRESA DE GUARDIA DE SEGURIDAD DEBE ADJUNTAR RESOLUCIÓN DE AUTORIZACIÓN DE LA EMPRESA DE RR.HH. Y RESOLUCIÓN DE AUTORIZACIÓN DE LA DIRECTIVA, CON LISTADO DE GG.SS. ACTUALIZADO. (SIN IMPLEMENTOS)",
                "INFORMACIÓN PARA DECISIONES POLICIALES",
                "FOTOGRAFÍA Y LISTADO DE CREDENCIALES DE VIGILANTES PRIVADOS.",
                "Copia de la Autorización del Encargado de Seguridad Suplente (conforme al Manual Operativo en Materias de Seguridad Privada, aprobado mediante Decreto Exento N° 32 del 31.01.2024).",
                "COMODATOS Y PADRONES O CERTIFICADO DE INSCRIPCIÓN DE TODOS LOS ARMAMENTOS Y CANTIDADES copia del reporte o despliegue del armamento de la empresa, otorgado por la DGMN.",
                "Copia de los CERTIFICADOS DEL LABORATORIO DE RESISTENCIA BALÍSTICA de los chalecos antibalas, otorgado por el IDIC, respecto de cumplir con la normativa técnica de ensayo balístico NIJ 0101.04.",
                "Copia del SEGURO DE VIDA POR 30 UF o su equivalente en dólares americanos, para el caso que los CHALECOS ANTIBALAS no cumplan con la función.",
                "SEGURO DE VIDA DE LOS VIGILANTES PRIVADOS, la que debe considerar el término de 'Vida' o 'Seguro de Vida'.",
                "OPERADORES CCTV QUE EMPRESA MONITOREA DESDE SANTIAGO ACREDITACIÓN DE LA EMPRESA Y OPERADORES.",
                "PLAN DE EMERGENCIA Y CROQUIS UBICACIÓN, ELEMENTOS DE EMERGENCIA Y VÍAS DE EVACUACIÓN.",
                "Adjunta los Anexos 'A,B,C,D,E y F', conforme a lo establecido en el formato del Plan de Seguridad."
            ],
            servicentros: [
                "MEDIDAS DE SEGURIDAD CUMPLEN CON EL ORDEN ESTABLECIDO DEL MANUAL DE ORGANIZACIÓN. (página 108 Y 109 establecimiento de venta y combustible al público)",
                "CAJERO AUTOMÁTICO: CUAL ES EL NÚMERO ATM Y A QUE BANCO PERTENECE EL CAJERO AUTOMÁTICO. (FOTOGRAFÍAS- INCLUIR UBICACIÓN EN CROQUIS.)",
                "QUE EMPRESA DE TRANSPORTE DE VALORES ES LA ENCARGADA DE REALIZAR LA CARGA Y DESCARGA DEL CAJERO.",
                "MANTIENE ESTANCO PARA LA CARGA Y DESCARGA DEL CAJERO; SI NO TIENE ESTANCO DEBE APOYAR LA OPERACIÓN CON UNA CÁMARA DE SEGURIDAD. (Agregar fotografías y croquis)",
                "OPERADOR CCTV: SI MANTIENE PROPIOS O DE LA CENTRAL SANTIAGO, DEBE GESTIONAR LAS AUTORIZACIONES DE LOS OPERADORES QUE REALIZAN ESTA LABOR. ADJUNTAR AUTORIZACIÓN DE LA EMPRESA Y DEL PERSONAL.",
                "MÁXIMO DE DINERO QUE MANTIENE LOS ATENDEDORES O BOMBEROS.",
                "EMPRESA DE GUARDIA DE SEGURIDAD DEBE ADJUNTAR RESOLUCIÓN DE AUTORIZACIÓN DE LA EMPRESA DE RR.HH. Y RESOLUCIÓN DE AUTORIZACIÓN DE LA DIRECTIVA, CON LISTADO DE GG.SS. ACTUALIZADO.",
                "CROQUIS DE CÁMARAS DE SEGURIDAD Y TECNOLOGÍA APLICADA (SENSORES DE HUMO, SENSORES DE MOVIMIENTO, ALARMAS, ETC.)",
                "ANÁLISIS DE VULNERABILIDADES Y MITIGACIÓN DE ELLAS.",
                "PLAN DE EMERGENCIA Y SUS ANEXOS.",
                "CROQUIS UBICACIÓN, ELEMENTOS DE EMERGENCIA Y VÍAS DE EVACUACIÓN.",
                "TODAS LAS FOTOGRAFÍAS DEBEN VENIR CON UNA DESCRIPCIÓN DE ELLAS."
            ],
            sobre500uf: [
                "MEDIDAS DE SEGURIDAD CUMPLEN CON EL ORDEN ESTABLECIDO DEL MANUAL DE ORGANIZACIÓN.",
                "CAJERO AUTOMÁTICO: CUAL ES EL NÚMERO ATM Y A QUE BANCO PERTENECE EL CAJERO AUTOMÁTICO. (FOTOGRAFÍAS- INCLUIR UBICACIÓN EN CROQUIS.)",
                "QUE EMPRESA DE TRANSPORTE DE VALORES ES LA ENCARGADA DE REALIZAR LA CARGA Y DESCARGA DEL CAJERO.",
                "MANTIENE ESTANCO PARA LA CARGA Y DESCARGA DEL CAJERO; SI NO TIENE ESTANCO DEBE APOYAR LA OPERACIÓN CON UNA CÁMARA DE SEGURIDAD. (Agregar fotografías y croquis)",
                "OPERADOR CCTV: SI MANTIENE PROPIOS O DE LA CENTRAL SANTIAGO, DEBE GESTIONAR LAS AUTORIZACIONES DE LOS OPERADORES QUE REALIZAN ESTA LABOR. ADJUNTAR AUTORIZACIÓN DE LA EMPRESA Y DEL PERSONAL.",
                "EMPRESA DE GUARDIA DE SEGURIDAD DEBE ADJUNTAR RESOLUCIÓN DE AUTORIZACIÓN DE LA EMPRESA DE RR.HH. Y RESOLUCIÓN DE AUTORIZACIÓN DE LA DIRECTIVA, CON LISTADO DE GG.SS. ACTUALIZADO. (SIN IMPLEMENTOS)",
                "CROQUIS DE CÁMARAS DE SEGURIDAD Y TECNOLOGÍA APLICADA (SENSORES DE HUMO, SENSORES DE MOVIMIENTO, ALARMAS, ETC.)",
                "ANÁLISIS DE VULNERABILIDADES Y MITIGACIÓN DE ELLAS.",
                "PLAN DE EMERGENCIA Y SUS ANEXOS.",
                "CROQUIS UBICACIÓN, ELEMENTOS DE EMERGENCIA Y VÍAS DE EVACUACIÓN."
            ],
            directivaInstalaciones: [
                "LISTADO DE LOS GG.SS. (Que realizan servicios en la instalación).",
                "FOTOCOPIA DE CREDENCIAL O SOLICITUD DE CREDENCIAL (Art. 18 D/S 93), Que realizarán servicios en la instalación.",
                "SEGURO DE VIDA GUARDIA DE SEGURIDAD (Art. 13 número 1 D/S 93) El rubro contratado debe decir Vida no fallecimiento ni muerte.",
                "SEGURO DE RESPONSABILIDAD CIVIL EMPRESA RR.HH. (Art. Undécimo número 3 D/S 867)",
                "CONTRATO DE PRESTACIÓN DE SERVICIOS (Entre empresa de rr.hh. Y empleador Art. Séptimo D/S 867) No adjuntar orden de compra, correos de aceptación de servicios etc.",
                "UNIFORME (conforme el art octavo D/S N° 867)",
                "AUTORIZACIÓN EMPRESA RR.HH. VIGENTE (Art. 5 D/S 93 y Art. décimo del D/S 867).",
                "SERVICIOS DE 12 HORAS (F-35-B o RES. Acuerdo Marco Dirección del Trabajo).",
                "INFORME DEBILIDADES Y AMENAZAS DE LA INSTALACIÓN (Inciso segundo Nro. 4, del apartado IV, D/exento 261).",
                "CHALECO ANTICORTE, Se debe adjuntar Certificación de la normativa técnica norteamericana NIJ 0115.00, Seguro de vida por 30 UF o su equivalente en dólares americanos.",
                "CHALECO ANTIBALA, Se debe adjuntar Resolución de autorización de uso otorgado por la AA.FF. (Art. 9 N° 2 y 3 del D/S 867)",
                "BASTÓN, ESPOSAS DE SEGURIDAD, Se debe adjuntar resolución de autorización de uso otorgado por AA.FF. (Art 9 N° 3 del D/S 867)"
            ],
            directivaFutbol: [
                "ANEXO CON DESCRIPCIÓN DE LA LABOR DEL GG.SS. EN SU FUNCIÓN.",
                "LISTADO DE LOS GG.SS.",
                "SEGURO DE VIDA GUARDIA DE SEGURIDAD (Art. 13 número 1 D/S 93)",
                "SEGURO DE RESPONSABILIDAD CIVIL DE LA EMPRESA DE RR.HH. (Art. Undécimo número 3 D/S. 867)",
                "CONTRATO DE PRESTACIÓN DE SERVICIOS ENTRE LA EMPRESA DE RR.HH. Y EL EQUIPO DE FÚTBOL ORGANIZADOR (Art. Séptimo D/S. 867).",
                "DESCRIPCIÓN Y FOTOGRAFÍA DEL UNIFORME (conforme el art octavo D/S. N° 867)",
                "AUTORIZACIÓN VIGENTE DE LA EMPRESA RR.HH. VIGENTE (Art. 5° D/S 93 y Art. décimo del D/S. 867).",
                "CONTRATO AMBULANCIA POR PARTE DEL EQUIPO ORGANIZADOR.",
                "AUTORIZACIÓN DE LA AMBULANCIA POR PARTE DE LA SEREMI DE SALUD.",
                "FOTOCOPIA DE LA CREDENCIAL O DE LA AUTORIZACIÓN VIGENTE DEL JEFE DE SEGURIDAD DEL CLUB ORGANIZADOR (Ley 19.327)",
                "COPIA DEL CONTRATO DEL JEFE DE SEGURIDAD CON EL CLUB ORGANIZADOR (equipo)",
                "PROPUESTA DEL PARTIDO PRESENTADA POR EL EQUIPO ORGANIZADOR.",
                "PLAN DE EVACUACIÓN"
            ],
            directivaEventos: [
                "DECLARACIÓN JURADA DEL EVENTO NOTARIADA",
                "LISTADO DE LOS GG.SS.",
                "SEGURO DE VIDA GUARDIA DE SEGURIDAD (Art. 13 número 1. D/S 93)",
                "SEGURO DE RESPONSABILIDAD CIVIL DE LA EMPRESA DE RR.HH. (Art. Undécimo número 3 D/S. 867)",
                "CONTRATO DE PRESTACIÓN DE SERVICIOS (Art. Séptimo D/S. 867).",
                "DESCRIPCIÓN Y FOTOGRAFÍA DEL UNIFORME (conforme el art octavo D/S. N° 867)",
                "CONTRATO AMBULANCIA",
                "RES. AUTORIZ. AMBULANCIA DE LA SEREMI",
                "ACTA DESCRIPTIVA MAS DE 3.000 PERSONAS INT.",
                "AUTORIZACIÓN VIGENTE DE LA EMPRESA RR.HH. VIGENTE (Art. 5° D/S 93 y Art. décimo del D/S. 867.",
                "PLAN DE EVACUACIÓN Y EMERGENCIA firmado, por un prevencionista de riesgos.",
                "CARTA INFORMATIVA A: Carabineros del sector, bomberos, municipalidad del sector y servicio de salud del sector, la que debe venir con timbre de recepción."
            ]
        };

        // Variables para almacenar el estado
        let estadoRequisitos = {};
        let tipoDirectivaSeleccionado = null;

        // Función para mostrar secciones
        function mostrarSeccion(seccion) {
            // Ocultar todas las secciones
            const secciones = document.querySelectorAll('.form-section');
            secciones.forEach(s => s.classList.remove('active'));

            // Mostrar la sección seleccionada
            document.getElementById(seccion + '-section').classList.add('active');

            // Establecer fecha y hora actual
            const ahora = new Date();
            const fechaHora = ahora.toISOString().slice(0, 16);
            
            if (seccion !== 'inicio') {
                const campoFecha = document.getElementById('fecha-' + seccion);
                if (campoFecha) {
                    campoFecha.value = fechaHora;
                }
            }

            // Generar requisitos si es necesario
            if (seccion === 'plan-seguridad') {
                generarRequisitos('plan-seguridad', requisitos.planSeguridad);
            } else if (seccion === 'servicentros') {
                generarRequisitos('servicentros', requisitos.servicentros);
            } else if (seccion === 'sobre-500uf') {
                generarRequisitos('500uf', requisitos.sobre500uf);
            }
        }

        // Función para generar requisitos dinámicamente
        function generarRequisitos(tipo, listaRequisitos) {
            const container = document.getElementById('requisitos-' + tipo);
            container.innerHTML = '';

            // Agregar header de columnas
            const headerDiv = document.createElement('div');
            headerDiv.style.cssText = `
                display: grid;
                grid-template-columns: 60px 1fr 200px 300px;
                gap: 15px;
                padding: 15px;
                background: #2d5016;
                color: white;
                font-weight: bold;
                border-radius: 8px;
                margin-bottom: 15px;
                align-items: center;
            `;
            headerDiv.innerHTML = `
                <div style="text-align: center;">N°</div>
                <div>REQUISITO</div>
                <div style="text-align: center;">CUMPLIMIENTO</div>
                <div style="text-align: center;">OBSERVACIONES</div>
            `;
            container.appendChild(headerDiv);

            listaRequisitos.forEach((requisito, index) => {
                const requisitoDiv = document.createElement('div');
                requisitoDiv.className = 'requisito-item';
                requisitoDiv.id = `requisito-${tipo}-${index}`;

                requisitoDiv.innerHTML = `
                    <div class="requisito-numero">${index + 1}</div>
                    <div class="requisito-titulo">${requisito}</div>
                    <div class="estado-buttons">
                        <button class="btn-estado btn-cumple" onclick="marcarEstado('${tipo}', ${index}, 'cumple')">
                            ✓ Cumple
                        </button>
                        <button class="btn-estado btn-no-cumple" onclick="marcarEstado('${tipo}', ${index}, 'no-cumple')">
                            ✗ No Cumple
                        </button>
                    </div>
                    <textarea class="observacion-input" id="obs-${tipo}-${index}" placeholder="Observaciones..."></textarea>
                `;

                container.appendChild(requisitoDiv);
            });
        }

        // Función para marcar el estado de un requisito
        function marcarEstado(tipo, index, estado) {
            const requisitoDiv = document.getElementById(`requisito-${tipo}-${index}`);
            const botones = requisitoDiv.querySelectorAll('.btn-estado');
            
            // Remover estado anterior
            requisitoDiv.classList.remove('cumple', 'no-cumple');
            botones.forEach(btn => btn.classList.remove('active'));

            // Aplicar nuevo estado
            requisitoDiv.classList.add(estado);
            const botonSeleccionado = requisitoDiv.querySelector(`.btn-${estado}`);
            botonSeleccionado.classList.add('active');

            // Guardar estado
            if (!estadoRequisitos[tipo]) {
                estadoRequisitos[tipo] = {};
            }
            estadoRequisitos[tipo][index] = estado;
        }

        // Función para seleccionar tipo de directiva
        function seleccionarDirectiva(tipo) {
            // Remover selección anterior
            const opciones = document.querySelectorAll('.directiva-option');
            opciones.forEach(opt => opt.classList.remove('active'));

            // Marcar nueva selección
            event.target.closest('.directiva-option').classList.add('active');
            tipoDirectivaSeleccionado = tipo;

            // Generar requisitos según el tipo
            let requisitosDirectiva;
            switch(tipo) {
                case 'instalaciones':
                    requisitosDirectiva = requisitos.directivaInstalaciones;
                    break;
                case 'futbol':
                    requisitosDirectiva = requisitos.directivaFutbol;
                    break;
                case 'eventos':
                    requisitosDirectiva = requisitos.directivaEventos;
                    break;
            }

            generarRequisitos('directiva', requisitosDirectiva);
        }

        // Función para imprimir formulario
        function imprimirFormulario(tipo) {
            // Verificar que se haya ingresado el nombre del inspector
            const inspector = document.getElementById('inspector-' + tipo).value;
            if (!inspector.trim()) {
                alert('Por favor, ingrese el nombre del funcionario inspector antes de imprimir.');
                return;
            }

            // Crear una ventana nueva para imprimir
            const ventanaImpresion = window.open('', '_blank');
            
            // Obtener el contenido de la sección actual
            const seccionActual = document.getElementById(tipo + '-section');
            const fecha = document.getElementById('fecha-' + tipo).value;
            
            // Crear el contenido HTML para imprimir
            let contenidoHTML = `
                <!DOCTYPE html>
                <html>
                <head>
                    <title>Formulario de Requisitos - OS10 Coquimbo</title>
                    <style>
                        body { font-family: Arial, sans-serif; margin: 20px; color: #000; }
                        .header { text-align: center; margin-bottom: 30px; border-bottom: 2px solid #2d5016; padding-bottom: 20px; }
                        .header-content { display: flex; align-items: center; justify-content: center; margin-bottom: 15px; }
                        .header-content img { height: 60px; margin-right: 15px; }
                        .header h1 { margin: 0; font-size: 20px; color: #2d5016; }
                        .header h2 { margin: 5px 0; font-size: 16px; color: #4a7c22; }
                        .inspector-info { background: #f5f5f5; padding: 15px; margin: 20px 0; border: 1px solid #ccc; border-left: 4px solid #2d5016; }
                        .header-requisitos { display: grid; grid-template-columns: 60px 1fr 150px 200px; gap: 15px; padding: 10px; background: #2d5016; color: white; font-weight: bold; margin: 20px 0; }
                        .requisito-item { margin: 10px 0; padding: 15px; border: 1px solid #ccc; display: grid; grid-template-columns: 60px 1fr 150px 200px; gap: 15px; align-items: start; }
                        .requisito-numero { background: #2d5016; color: white; padding: 8px 12px; border-radius: 6px; text-align: center; font-weight: bold; }
                        .requisito-titulo { font-weight: bold; line-height: 1.4; }
                        .estado { font-weight: bold; text-align: center; }
                        .cumple { color: green; }
                        .no-cumple { color: red; }
                        .observacion { }
                        .observacion textarea { width: 100%; border: 1px solid #ccc; padding: 5px; min-height: 50px; resize: none; }
                        @media print {
                            body { margin: 0; }
                            .no-print { display: none; }
                        }
                    </style>
                </head>
                <body>
                    <div class="header">
                        <div class="header-content">
                            <img src="logo.png" alt="Logo Carabineros">
                            <div>
                                <h1>SISTEMA DE REQUISITOS DE SEGURIDAD PRIVADA</h1>
                                <h2>OS10 COQUIMBO - CARABINEROS DE CHILE</h2>
                            </div>
                        </div>
                        <h3>${seccionActual.querySelector('.form-header h2').textContent}</h3>
                    </div>
                    
                    <div class="inspector-info">
                        <p><strong>Funcionario Inspector:</strong> ${inspector}</p>
                        <p><strong>Fecha y Hora de Inspección:</strong> ${new Date(fecha).toLocaleString('es-CL')}</p>
                        <p><strong>Fecha de Impresión:</strong> ${new Date().toLocaleString('es-CL')}</p>
                    </div>
            `;

            // Agregar requisitos
            const requisitosContainer = seccionActual.querySelector('[id^="requisitos-"]');
            const requisitosItems = requisitosContainer.querySelectorAll('.requisito-item');
            
            // Agregar header de tabla
            contenidoHTML += `
                <div class="header-requisitos">
                    <div style="text-align: center;">N°</div>
                    <div>REQUISITO</div>
                    <div style="text-align: center;">CUMPLIMIENTO</div>
                    <div style="text-align: center;">OBSERVACIONES</div>
                </div>
            `;
            
            requisitosItems.forEach((item, index) => {
                const numero = item.querySelector('.requisito-numero').textContent;
                const titulo = item.querySelector('.requisito-titulo').textContent;
                const observacion = item.querySelector('.observacion-input').value;
                
                let estadoTexto = 'SIN REVISAR';
                let estadoClase = '';
                
                if (item.classList.contains('cumple')) {
                    estadoTexto = '✓ CUMPLE';
                    estadoClase = 'cumple';
                } else if (item.classList.contains('no-cumple')) {
                    estadoTexto = '✗ NO CUMPLE';
                    estadoClase = 'no-cumple';
                }

                contenidoHTML += `
                    <div class="requisito-item">
                        <div class="requisito-numero">${numero}</div>
                        <div class="requisito-titulo">${titulo}</div>
                        <div class="estado ${estadoClase}">${estadoTexto}</div>
                        <div class="observacion">
                            <textarea readonly>${observacion}</textarea>
                        </div>
                    </div>
                `;
            });

            contenidoHTML += `
                    <div style="margin-top: 40px; text-align: center; border-top: 2px solid #2d5016; padding-top: 20px;">
                        <p><strong>FIRMA DEL FUNCIONARIO INSPECTOR</strong></p>
                        <br><br><br>
                        <p>_________________________________</p>
                        <p><strong>${inspector}</strong></p>
                        <p>OS10 Coquimbo</p>
                        <p><strong>CARABINEROS DE CHILE</strong></p>
                    </div>
                </body>
                </html>
            `;

            // Escribir el contenido en la nueva ventana
            ventanaImpresion.document.write(contenidoHTML);
            ventanaImpresion.document.close();

            // Imprimir después de un breve delay para asegurar que el contenido se cargue
            setTimeout(() => {
                ventanaImpresion.print();
            }, 500);
        }

        // Inicializar la aplicación
        document.addEventListener('DOMContentLoaded', function() {
            // Establecer fecha y hora actual en todos los campos de fecha
            const ahora = new Date();
            const fechaHora = ahora.toISOString().slice(0, 16);
            
            const camposFecha = document.querySelectorAll('input[type="datetime-local"]');
            camposFecha.forEach(campo => {
                campo.value = fechaHora;
            });
        });
    </script>
</body>
</html>
